{"version":3,"sources":["../../src/lib/create-app.js"],"names":["createApp","config","database","app","Koa","context","middleware","env","proxy"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEe,eAAeA,SAAf,CAAyBC,MAAzB,EAAiCC,QAAjC,EAA2C;AACxD,QAAMC,MAAM,IAAIC,YAAJ,EAAZ;AAEAD,MAAIE,OAAJ,CAAYH,QAAZ,GAAuBA,QAAvB;AACAC,MAAIE,OAAJ,CAAYJ,MAAZ,GAAqBA,MAArB;AAEA,QAAMK,aAAa,MAAM,8BAAgBL,OAAOK,UAAvB,EAAmCH,GAAnC,CAAzB;;AAEA,MAAIA,IAAII,GAAJ,IAAW,YAAf,EAA6B;AAC3BJ,QAAIK,KAAJ,GAAY,IAAZ;AACD;;AAED,SAAO;AACLL,OADK;AAELG;AAFK,GAAP;AAID","sourcesContent":["import Koa from 'koa'\nimport setupMiddleware from './setup-middleware'\n\nexport default async function createApp(config, database) {\n  const app = new Koa()\n\n  app.context.database = database\n  app.context.config = config\n\n  const middleware = await setupMiddleware(config.middleware, app)\n\n  if (app.env == 'production') {\n    app.proxy = true\n  }\n\n  return {\n    app,\n    middleware,\n  }\n}\n"],"file":"create-app.js"}